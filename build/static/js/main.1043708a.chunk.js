(this.webpackJsonpserver=this.webpackJsonpserver||[]).push([[0],{129:function(e,t,a){e.exports=a(293)},134:function(e,t,a){},183:function(e,t,a){},188:function(e,t){},190:function(e,t){},227:function(e,t){},229:function(e,t){},230:function(e,t){},235:function(e,t){},237:function(e,t){},257:function(e,t){},273:function(e,t){},276:function(e,t){},293:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),o=a(69),r=a.n(o),s=(a(134),a(9)),c=a(8),i=a(6);var m=()=>{const{state:e,dispatch:t}=Object(l.useContext)(x),a=Object(s.f)(),[o,r]=Object(l.useState)([]),[m,d]=Object(l.useState)(!1),[p,u]=Object(l.useState)(""),h=()=>e?n.a.createElement(n.a.Fragment,null,n.a.createElement(i.Navbar,{alignLinks:"right",brand:n.a.createElement(c.b,{to:e?"/":"/signin",className:"brand-logo"},"Xprose DOM"),id:"mobile-nav",menuIcon:n.a.createElement(i.Icon,null,"menu"),options:{draggable:!0,edge:"left",inDuration:250,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,outDuration:200,preventScrolling:!0},className:"white setNav"},n.a.createElement(i.NavItem,null,n.a.createElement("i",{className:"modal-trigger material-icons",href:"#modal2",node:"i",onClick:()=>d(!0)},"search")),n.a.createElement(c.b,{to:"/profile"},n.a.createElement(i.NavItem,null,"Profile")),n.a.createElement(c.b,{to:"/create"},n.a.createElement(i.NavItem,null,"Create Post")),n.a.createElement(c.b,{to:"/myfollowingspost"},n.a.createElement(i.NavItem,null,"My following Post")),n.a.createElement(i.NavItem,null," ",n.a.createElement("button",{class:"waves-effect waves-light btn #1565c0 blue darken-3 white-text",onClick:()=>{localStorage.clear(),t({type:"CLEAR"}),a.push("/signin")}},"Logout")))):n.a.createElement(i.Navbar,{alignLinks:"right",brand:n.a.createElement(c.b,{to:e?"/":"/signin",className:"brand-logo"},"Xprose Dom"),id:"mobile-nav",menuIcon:n.a.createElement(i.Icon,null,"menu"),options:{draggable:!0,edge:"left",inDuration:250,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,outDuration:200,preventScrolling:!0},className:"white"},n.a.createElement(c.b,{to:"/signin"},n.a.createElement(i.NavItem,null,"Login")),n.a.createElement(c.b,{to:"/signup"},n.a.createElement(i.NavItem,null,"SignUp")));return n.a.createElement(n.a.Fragment,null,n.a.createElement(h,null),n.a.createElement(i.Modal,{actions:[n.a.createElement(i.Button,{modal:"close",flat:!0,node:"button",waves:"green"},"Close")],bottomSheet:!1,fixedFooter:!1,header:"Search",id:"modal2",open:m,options:{dismissible:!0,endingTop:"10%",inDuration:250,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,opacity:.5,outDuration:250,preventScrolling:!0,startingTop:"4%"}},n.a.createElement("input",{type:"text",placeholder:"Search",value:p,onChange:e=>{var t;t=e.target.value,u(t),fetch("/search-user",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:p.toLowerCase()})}).then(e=>e.json()).then(e=>{console.log(e),r(e)})}}),n.a.createElement("ul",{className:"collection"},o.map(t=>n.a.createElement("li",{className:"collection-item",onClick:()=>{d(!1),u(""),window.open(t._id!=e._id?"/profile/"+t._id:"/profile","_self")}},n.a.createElement("img",{src:t.pic,style:{width:"5%",border:"1px solid",borderColor:"#d966ff",borderRadius:"50%"}}),t.name)))))},d=(a(183),a(14)),p=a.n(d),u=a(295),h=a(127),g=a.n(h),E=()=>{const{width:e,height:t}=Object(u.a)();return n.a.createElement(g.a,{width:e,height:t+1e4,gravity:.4})};var f=()=>{const[e,t]=Object(l.useState)([]),{state:a,dispatch:o}=Object(l.useContext)(x),[r,s]=Object(l.useState)("0");Object(l.useEffect)(()=>{fetch("/allpost",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then(e=>e.json()).then(e=>{console.log(e),t(e.posts)})},[]);function m(e){var t=e.search("upload");return e.slice(0,t+7)+"q_auto:eco/"+e.slice(t+7)}return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"home"},n.a.createElement("h3",{className:"brand-logo",style:{textAlign:"center"}},0==e.length?n.a.createElement("div",null,n.a.createElement("div",{class:"preloader-wrapper small active",style:{marginTop:"13%"}},n.a.createElement("div",{class:"spinner-layer spinner-green-only"},n.a.createElement("div",{class:"circle-clipper left"},n.a.createElement("div",{class:"circle"})),n.a.createElement("div",{class:"gap-patch"},n.a.createElement("div",{class:"circle"})),n.a.createElement("div",{class:"circle-clipper right"},n.a.createElement("div",{class:"circle"}))),n.a.createElement("br",null)),n.a.createElement("h4",{style:{color:"white"}},"Loading")):""),e.map(l=>n.a.createElement("div",{className:"card home-card",key:l._id},l.postedby._id===a._id?n.a.createElement("i",{className:"material-icons",style:{cursor:"pointer",float:"right"},onClick:()=>{var a;console.log("hell"),a=l._id,console.log(a),fetch("/deletepost/".concat(a),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then(e=>e.json()).then(a=>{console.log(a);const l=e.filter(e=>e._id!==a._id);t(l)})}},"delete"):n.a.createElement("i",null),n.a.createElement("h5",{style:{display:"inline-block"}},n.a.createElement(c.b,{to:l.postedby._id!=a._id?"/profile/"+l.postedby._id:"/profile"},n.a.createElement("img",{src:m(l.postedby.pic),style:{width:"8%",marginRight:"2%",borderRadius:"50%"}}),l.postedby.name)),n.a.createElement("div",{className:"card-image"},n.a.createElement("img",{src:l.photo})),n.a.createElement("div",{className:"card-content"},l.likes.includes(a._id)?n.a.createElement("i",{className:"material-icons",style:{color:"red",cursor:"pointer"},onClick:()=>{return a=l._id,void fetch("/unlike",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:a})}).then(e=>e.json()).then(a=>{const l=e.map(e=>a._id==e._id?a:e);t(l)});var a}},"favorite"):n.a.createElement("i",{className:"material-icons",style:{color:"red",cursor:"pointer"},onClick:()=>{var a;s("1"),a=l._id,fetch("/like",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:a})}).then(e=>e.json()).then(a=>{console.log(a);const l=e.map(e=>a._id==e._id?a:e);t(l),setTimeout(()=>{s("0")},5e3)})}},"favorite_border"),n.a.createElement("h6",null,"Liked by ",l.likes.length),n.a.createElement("h4",null,l.title),n.a.createElement("p",null,l.body),n.a.createElement(i.Collapsible,{accordion:!0},n.a.createElement(i.CollapsibleItem,{expanded:!1,header:"Comments",node:"div",icon:n.a.createElement(i.Icon,null,"comment"),className:"commentCard"},l.comments.map(o=>n.a.createElement("h6",null,n.a.createElement(c.b,{to:l.postedby._id!=a._id?"/profile/"+l.postedby._id:"/profile"},n.a.createElement("img",{src:o.postedby.pic,style:{width:"8%",marginRight:"2%"}}),n.a.createElement("span",{style:{fontWeight:500}},o.postedby.name))," ",o.text,o.postedby._id==a._id?n.a.createElement("i",{class:"material-icons",style:{float:"right",cursor:"pointer"},onClick:()=>{return a=l._id,n=o._id,void fetch("/deletecomment/".concat(a),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("jwt"),"Content-Type":"application/json"},body:JSON.stringify({commentId:n})}).then(e=>e.json()).then(a=>{const l=e.map(e=>a._id==e._id?a:e);t(l)}).catch(e=>{console.log(e)});var a,n}},"delete"):n.a.createElement("i",null))))),n.a.createElement("form",{onSubmit:a=>{var n,o;a.preventDefault(),n=a.target[0].value,o=l._id,fetch("/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({text:n,postId:o})}).then(e=>e.json()).then(a=>{const l=e.map(e=>a._id==e._id?a:e);t(l)}).catch(e=>{console.log(e)}),a.target[0].value=""}},n.a.createElement("input",{type:"text",placeholder:"add a comment"})))))),"1"==r?n.a.createElement(E,null):n.a.createElement(n.a.Fragment,null))};var y=()=>{const[e,t]=Object(l.useState)([]),{state:a,dispatch:o}=Object(l.useContext)(x),[r,s]=Object(l.useState)(""),[c,m]=Object(l.useState)(void 0),[d,p]=Object(l.useState)(0),[u,h]=Object(l.useState)({});Object(l.useEffect)(()=>{fetch("/mypost",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then(e=>e.json()).then(a=>{t(a.mypost),console.log(e)}).catch(e=>{console.log(e)})},[]),Object(l.useEffect)(()=>{if(r){const e=new FormData;p(1),e.append("file",r),e.append("upload_preset","insta-clone"),e.append("cloud_name","xprose"),fetch("\thttps://api.cloudinary.com/v1_1/xprose/image/upload",{method:"post",body:e}).then(e=>e.json()).then(e=>{fetch("/updatepic",{method:"put",headers:{Authorization:"Bearer "+localStorage.getItem("jwt"),"Content-Type":"application/json"},body:JSON.stringify({pic:e.url})}).then(e=>e.json()).then(t=>{console.log(t),p(0),localStorage.setItem("user",JSON.stringify({...a,pic:e.url})),o({type:"UPDATEPIC",payload:e.url}),m(e.url)}).catch(e=>{p(0),console.log(e)})}).catch(e=>{console.log(e)})}},[r]);return n.a.createElement("div",{style:{maxWidth:"700px",color:"white"},className:"profileBar"},n.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",margin:"18px auto",borderBottom:"1px solid gray"}},n.a.createElement("div",null,n.a.createElement("img",{href:"#modal1",className:"modal-trigger",node:"img",onClick:()=>h({photo:a.pic}),style:{width:"180px",height:"180px",borderRadius:"50%",display:"block"},src:a?a.pic:"loading"}),n.a.createElement("div",{className:"file-field input-field",style:{width:"70%",display:"inline-block",marginRight:"4%"}},n.a.createElement("div",{className:"btn"},n.a.createElement("span",{style:{fontSize:"0.8em"}},"UPDATE PROFILE PIC"),n.a.createElement("input",{type:"file",onChange:e=>{return t=e.target.files[0],void s(t);var t}})),n.a.createElement("div",{className:"file-path-wrapper"},n.a.createElement("input",{className:"file-path validate",type:"text"}))),n.a.createElement("div",{class:"preloader-wrapper small active",style:{display:d?"inline-block":"none"}},n.a.createElement("div",{class:"spinner-layer spinner-green-only"},n.a.createElement("div",{class:"circle-clipper left"},n.a.createElement("div",{class:"circle"})),n.a.createElement("div",{class:"gap-patch"},n.a.createElement("div",{class:"circle"})),n.a.createElement("div",{class:"circle-clipper right"},n.a.createElement("div",{class:"circle"}))))),n.a.createElement("div",null,n.a.createElement("h4",null,a?a.name:"loading"),n.a.createElement("p",{style:{fontSize:"1.2em"}},a?a.email:"loading"),n.a.createElement("p",{style:{display:"flex",justifyContent:"space-around",width:"108%"}},n.a.createElement("p",{style:{fontSize:"0.8em"}},e.length," posts"),n.a.createElement("p",{style:{fontSize:"0.8em"}},a?a.followers.length:""," followers"),n.a.createElement("p",{style:{fontSize:"0.8em"}},a?a.following.length:""," following")))),n.a.createElement("div",{className:"gallery"},e.slice(0).reverse().map(e=>n.a.createElement(n.a.Fragment,null,n.a.createElement("img",{href:"#modal1",node:"img",key:e._id,className:"item modal-trigger",onClick:()=>h(e),src:e.photo,alt:e.title}))),n.a.createElement(i.Modal,{actions:[n.a.createElement(i.Button,{flat:!0,modal:"close",node:"button",waves:"green"},"Close")],bottomSheet:!1,fixedFooter:!1,header:u.title,id:"modal1",open:!1,options:{dismissible:!0,endingTop:"10%",inDuration:250,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,opacity:.5,outDuration:250,preventScrolling:!0,startingTop:"4%"}},n.a.createElement("img",{src:u.photo,className:"post"}))))};var b=()=>{const[e,t]=Object(l.useState)(""),[a,o]=Object(l.useState)(""),[r,i]=Object(l.useState)(""),[m,d]=Object(l.useState)(""),[u,h]=Object(l.useState)(void 0),[g,E]=Object(l.useState)(""),f=Object(s.f)();Object(l.useEffect)(()=>{u&&y()},[u]);const y=()=>{/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(r)?fetch("/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.toLowerCase(),password:a,email:r.toLowerCase(),pic:u})}).then(e=>e.json()).then(e=>{e.error?(p.a.toast({html:e.error,classes:"#d32f2f red darken-2"}),E(0)):(p.a.toast({html:e.message,classes:"#43a047 green darken-1"}),f.push("/signin"))}).catch(e=>{console.log(e)}):p.a.toast({html:"Invalid Email!",classes:"#d32f2f red darken-2"})},b=()=>{E(1),m?(()=>{const e=new FormData;e.append("file",m),e.append("upload_preset","insta-clone"),e.append("cloud_name","xprose"),fetch("\thttps://api.cloudinary.com/v1_1/xprose/image/upload",{method:"post",body:e}).then(e=>e.json()).then(e=>{h(e.url)}).catch(e=>{console.log(e)})})():y()};return n.a.createElement("div",{className:"mycard"},n.a.createElement("div",{className:"card auth-card input-field"},n.a.createElement("h2",{className:"brand-logo"},"Xprose DOM"),n.a.createElement("input",{type:"text",placeholder:"name",value:e,onChange:e=>t(e.target.value)}),n.a.createElement("input",{type:"text",placeholder:"email (Please type a false email since it is beta ver.)",value:r,onChange:e=>i(e.target.value)}),n.a.createElement("input",{type:"password",placeholder:"password (Please type a false password since it is beta ver.)",value:a,onChange:e=>o(e.target.value)}),n.a.createElement("div",{className:"file-field input-field"},n.a.createElement("div",{className:"btn"},n.a.createElement("span",null,"UPLOAD IMAGE"),n.a.createElement("input",{type:"file",onChange:e=>d(e.target.files[0])})),n.a.createElement("div",{className:"file-path-wrapper"},n.a.createElement("input",{className:"file-path validate",type:"text"}))),n.a.createElement("button",{class:"waves-effect waves-light btn #1565c0 blue darken-3 white-text",onClick:()=>b()},"Sign Up"),n.a.createElement("h6",null,n.a.createElement(c.b,{to:"/signin"},"Already have an account ?")),n.a.createElement("div",null),n.a.createElement("div",{className:"progress",id:"progress-bar",style:{display:1==g?"block":"none"}},n.a.createElement("div",{className:"indeterminate"}))))};var v=()=>{const{state:e,dispatch:t}=Object(l.useContext)(x),[a,o]=Object(l.useState)(""),[r,i]=Object(l.useState)(""),m=Object(s.f)();return n.a.createElement("div",{className:"mycard"},n.a.createElement("div",{className:"card auth-card input-field"},n.a.createElement("h2",{className:"brand-logo"},"Xprose DOM"),n.a.createElement("input",{type:"email",placeholder:"Email",value:r,onChange:e=>i(e.target.value)}),n.a.createElement("input",{type:"password",placeholder:"Password",value:a,onChange:e=>o(e.target.value)}),n.a.createElement("button",{class:"waves-effect waves-light btn #1565c0 blue darken-3 white-text",style:{marginBottom:"2%"},onClick:()=>{fetch("/signin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:a,email:r})}).then(e=>e.json()).then(e=>{e.error?p.a.toast({html:e.error,classes:"#d32f2f red darken-2"}):(localStorage.setItem("jwt",e.token),localStorage.setItem("user",JSON.stringify(e.user)),t({type:"USER",payload:e.user}),p.a.toast({html:"Signed In Successfully",classes:"#43a047 green darken-1"}),m.push("/"))}).catch(e=>{console.log(e)})}},"Login"),n.a.createElement(c.b,{to:"/forgot_password"},n.a.createElement("h6",{style:{marginBottom:"5%"}},"Forgot Password ?")),n.a.createElement("div",{className:"or-seperator",style:{borderBottom:"1px solid gray"}},n.a.createElement("b",{style:{backgroundColor:"#aaa",border:"1px solid grey",borderRadius:"50%",padding:"2%"}},"OR")),n.a.createElement("a",{class:"btn-floating btn-large waves-effect waves-light",style:{marginTop:"3%",margin:"5%",backgroundColor:"#507cc0"}},n.a.createElement("i",{class:"fab fa-facebook"})),n.a.createElement("a",{class:"btn-floating btn-large waves-effect waves-light red",style:{marginTop:"3%",margin:"5%"}},n.a.createElement("i",{class:"fab fa-google"})),n.a.createElement("a",{class:"btn-floating btn-large waves-effect waves-light",style:{marginTop:"3%",margin:"5%",backgroundColor:"#64ccf1"}},n.a.createElement("i",{class:"fab fa-twitter"})),n.a.createElement("h6",null,n.a.createElement(c.b,{to:"/signup"},"Dont have an account ?"))))};var w=()=>{const e=Object(s.f)(),[t,a]=Object(l.useState)(""),[o,r]=Object(l.useState)(""),[c,i]=Object(l.useState)(""),[m,d]=Object(l.useState)(""),[u,h]=Object(l.useState)("");return n.a.createElement("div",{className:"card input-field",style:{margin:"10px auto",maxWidth:"500px",padding:"20px",textAlign:"center",marginTop:"6%"}},n.a.createElement("h2",{className:"brand-logo"},"Create Post"),n.a.createElement("input",{type:"text",placeholder:"title",value:t,onChange:e=>a(e.target.value)}),n.a.createElement("input",{type:"text",placeholder:"body",value:o,onChange:e=>r(e.target.value)}),n.a.createElement("div",{className:"file-field input-field"},n.a.createElement("div",{className:"btn"},n.a.createElement("span",null,"UPLOAD IMAGE"),n.a.createElement("input",{type:"file",onChange:e=>i(e.target.files[0])})),n.a.createElement("div",{className:"file-path-wrapper"},n.a.createElement("input",{className:"file-path validate",type:"text"}))),n.a.createElement("button",{className:"waves-effect waves-light btn #1565c0 blue darken-1 white-text",onClick:()=>(()=>{h(1);const a=new FormData;a.append("file",c),a.append("upload_preset","insta-clone"),a.append("cloud_name","xprose"),a.append("quality","auto:low"),fetch("\thttps://api.cloudinary.com/v1_1/xprose/image/upload",{method:"post",body:a}).then(e=>e.json()).then(a=>{d(a.url),fetch("/createpost",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({pic:a.url,title:t,body:o})}).then(e=>e.json()).then(t=>{console.log(t),t.error?p.a.toast({html:t.error,classes:"#d32f2f red darken-2"}):(p.a.toast({html:"Created post successfully",classes:"#43a047 green darken-1"}),e.push("/"))}).catch(e=>{console.log(e)})}).catch(e=>{console.log(e)})})()},"Submit Post"),n.a.createElement("div",{className:"progress",id:"progress-bar",style:{display:u?"block":"none"}},n.a.createElement("div",{className:"indeterminate"})))};const S=(e,t)=>"USER"==t.type?t.payload:"CLEAR"==t.type?null:"UPDATE"==t.type?{...e,followers:t.payload.followers,following:t.payload.following}:"UPDATEPIC"==t.type?{...e,pic:t.payload}:e;var j=()=>{const[e,t]=Object(l.useState)(null),{state:a,dispatch:o}=Object(l.useContext)(x),{userid:r}=Object(s.g)(),[c,m]=Object(l.useState)(!a||!a.following.includes(r)),[d,p]=Object(l.useState)({});Object(l.useEffect)(()=>{fetch("/user/".concat(r),{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then(e=>e.json()).then(e=>{console.log(e),t(e)}).catch(e=>{console.log(e)})},[]);return n.a.createElement(n.a.Fragment,null,e?n.a.createElement("div",{style:{maxWidth:"700px",margin:"0px auto",color:"white"}},n.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",margin:"18px auto",borderBottom:"1px solid gray"}},n.a.createElement("div",null,n.a.createElement("img",{href:"#modal1",className:"modal-trigger",node:"img",onClick:()=>p({photo:e.user.pic}),style:{width:"180px",height:"180px",borderRadius:"50%"},src:e.user.pic})),n.a.createElement("div",null,n.a.createElement("h4",null,e.user.name),n.a.createElement("p",{style:{fontSize:"1.2em"}},e.user.email),n.a.createElement("p",{style:{display:"flex",justifyContent:"space-around",width:"108%"}},n.a.createElement("p",{style:{fontSize:"0.8em"}},e.posts.length," posts"),n.a.createElement("p",{style:{fontSize:"0.8em"}},e.user.followers.length," followers"),n.a.createElement("p",{style:{fontSize:"0.8em"}},e.user.following.length," following")),c?n.a.createElement("button",{class:"waves-effect waves-light btn #1565c0 blue darken-3 white-text",onClick:()=>{fetch("/follower",{method:"put",headers:{Authorization:"Bearer "+localStorage.getItem("jwt"),"Content-Type":"application/json"},body:JSON.stringify({followid:r})}).then(e=>e.json()).then(e=>{o({type:"UPDATE",payload:{following:e.following,followers:e.followers}}),localStorage.setItem("user",JSON.stringify(e)),t(t=>({...t,user:{...t.user,followers:[...t.user.followers,e._id]}})),m(!1),console.log(e)}).catch(e=>{console.log(e)})}},"Follow"):n.a.createElement("button",{class:"waves-effect waves-light btn #1565c0 blue darken-3 white-text",onClick:()=>{fetch("/unfollower",{method:"put",headers:{Authorization:"Bearer "+localStorage.getItem("jwt"),"Content-Type":"application/json"},body:JSON.stringify({unfollowid:r})}).then(e=>e.json()).then(e=>{o({type:"UPDATE",payload:{following:e.following,followers:e.followers}}),localStorage.setItem("user",JSON.stringify(e)),t(t=>{const a=t.user.followers.filter(t=>t!=e._id);return{...t,user:{...t.user,followers:a}}}),m(!0),console.log(e)}).catch(e=>{console.log(e)})}},"Unfollow"))),n.a.createElement("div",{className:"gallery"},e.posts.slice(0).reverse().map(e=>n.a.createElement(n.a.Fragment,null,n.a.createElement("img",{href:"#modal1",node:"img",key:e._id,className:"item modal-trigger",onClick:()=>p(e),src:e.photo,alt:e.title}))),n.a.createElement(i.Modal,{actions:[n.a.createElement(i.Button,{flat:!0,modal:"close",node:"button",waves:"green"},"Close")],bottomSheet:!1,fixedFooter:!1,header:d.title,id:"modal1",open:!1,options:{dismissible:!0,endingTop:"10%",inDuration:250,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,opacity:.5,outDuration:250,preventScrolling:!0,startingTop:"4%"}},n.a.createElement("img",{src:d.photo,className:"post"})))):n.a.createElement("h2",{className:"brand-logo"},"Loading..."))};var C=()=>{const[e,t]=Object(l.useState)([]),{state:a,dispatch:o}=Object(l.useContext)(x);Object(l.useEffect)(()=>{fetch("/getsubpost",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then(e=>e.json()).then(e=>{console.log(e.posts),t(e.posts)})},[]);return n.a.createElement("div",{className:"home"},e.map(l=>(console.log(a),n.a.createElement("div",{className:"card home-card",key:l._id},n.a.createElement("h5",{style:{display:"inline-block"}},n.a.createElement(c.b,{to:l.postedby._id!=a._id?"/profile/"+l.postedby._id:"/profile"},l.postedby.name)),l.postedby._id==a._id?n.a.createElement("i",{class:"material-icons",style:{float:"right",cursor:"pointer"},onClick:()=>{return a=l._id,void fetch("/deletepost/".concat(a),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then(e=>e.json()).then(a=>{const l=e.map(e=>a._id==e._id?a:e);t(l)});var a}},"delete"):n.a.createElement("i",null),n.a.createElement("div",{className:"card-image"},n.a.createElement("img",{src:l.photo})),n.a.createElement("div",{className:"card-content"},l.likes.includes(a._id)?n.a.createElement("i",{className:"material-icons",style:{color:"red",cursor:"pointer"},onClick:()=>{return a=l._id,void fetch("/unlike",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:a})}).then(e=>e.json()).then(a=>{const l=e.map(e=>a._id==e._id?a:e);t(l)});var a}},"favorite"):n.a.createElement("i",{className:"material-icons",style:{color:"red",cursor:"pointer"},onClick:()=>{return a=l._id,void fetch("/like",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:a})}).then(e=>e.json()).then(a=>{console.log(a);const l=e.map(e=>a._id==e._id?a:e);t(l)});var a}},"favorite_border"),n.a.createElement("h6",null,"Liked by ",l.likes.length),n.a.createElement("h4",null,l.title),n.a.createElement("p",null,l.body),n.a.createElement(i.Collapsible,{accordion:!0},n.a.createElement(i.CollapsibleItem,{expanded:!1,header:"Comments",node:"div",icon:n.a.createElement(i.Icon,null,"comment")},l.comments.map(o=>n.a.createElement("h6",null,n.a.createElement("span",{style:{fontWeight:500}},o.postedby.name)," ",o.text,o.postedby._id==a._id?n.a.createElement("i",{class:"material-icons",style:{float:"right",cursor:"pointer"},onClick:()=>{return a=l._id,n=o._id,void fetch("/deletecomment/".concat(a),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("jwt"),"Content-Type":"application/json"},body:JSON.stringify({commentId:n})}).then(e=>e.json()).then(a=>{const l=e.map(e=>a._id==e._id?a:e);t(l)}).catch(e=>{console.log(e)});var a,n}},"delete"):n.a.createElement("i",null))))),n.a.createElement("form",{onSubmit:a=>{var n,o;a.preventDefault(),n=a.target[0].value,o=l._id,fetch("/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({text:n,postId:o})}).then(e=>e.json()).then(a=>{const l=e.map(e=>a._id==e._id?a:e);t(l)}).catch(e=>{console.log(e)}),a.target[0].value=""}},n.a.createElement("input",{type:"text",placeholder:"add a comment"})))))))};a(184);var O=()=>{const[e,t]=Object(l.useState)("");return n.a.createElement("div",{className:"mycard"},n.a.createElement("div",{className:"card auth-card input-field"},n.a.createElement("h3",null,"Forgot Pssword"),n.a.createElement("input",{type:"email",placeholder:"Email",value:e,style:{display:"inline",width:"80%"},onChange:e=>{t(e.target.value)}}),n.a.createElement("button",{class:"waves-effect waves-light\r btn #1565c0 blue darken-3 white-text",style:{marginBottom:"2%",display:"inline-block"},onClick:()=>{fetch("/forgotpassword",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}).then(e=>e.json()).then(e=>{console.log(e)}).catch(e=>{console.log(e)})}},n.a.createElement("i",{class:"material-icons"},"send"))))},_=a(48);var N=()=>{const[e,t]=Object(l.useState)([]),[a,o]=Object(l.useState)([]),[r,s]=Object(l.useState)([]);Object(l.useEffect)(()=>{fetch("/getchats",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then(e=>e.json()).then(e=>{t(e)});for(let t=0;t<a.length;t++)a[t].item=e[a[t].key_chat]});var c=document.getElementById("chatarea");return c&&(c.scrollTop=c.scrollHeight),n.a.createElement("div",{style:{position:"fixed",bottom:"0",right:"0"}},a.map((e,t)=>n.a.createElement(i.Collapsible,{accordion:!0,style:{width:"14rem",display:"inline-block ",backgroundColor:"white"},id:"chatox"},n.a.createElement(i.CollapsibleItem,{expanded:!1,header:e.item.chat_person_name,icon:n.a.createElement(i.Icon,null,"filter_drama"),node:"div",style:{position:"relative"}},n.a.createElement("div",{style:{height:"12rem",overflow:"auto"},id:"chatarea"},e.item.messages.map(e=>n.a.createElement("div",{className:"teal",style:{margin:"0.5em",padding:"0.5em",border:"none",borderRadius:"5px",color:"white"}},e.sender==JSON.parse(localStorage.getItem("user"))._id?n.a.createElement("div",{style:{textAlign:"right",wordWrap:"break-word"}},e.message):n.a.createElement("div",{style:{wordWrap:"break-word"}},e.message)))),n.a.createElement("div",{class:"input-field col s6",style:{position:"absolute",width:"100%",bottom:"0",marginBottom:"0"}},n.a.createElement("form",{onSubmit:e=>{((e,t)=>{e.preventDefault(),console.log(e.target[0].value);var l=e.target[0].value;fetch("/addchats",{method:"put",headers:{Authorization:"Bearer "+localStorage.getItem("jwt"),"Content-Type":"application/json"},body:JSON.stringify({chat_person:a[t].item.chat_person,chat_person_name:a[t].item.chat_person_name,messages:{sender:JSON.parse(localStorage.getItem("user"))._id,sender_name:JSON.parse(localStorage.getItem("user")).name,message:l}})}).then(e=>e.json()).then(e=>{console.log(t),a[t].item.messages.push({sender:JSON.parse(localStorage.getItem("user"))._id,sender_name:JSON.parse(localStorage.getItem("user")).name,message:l}),console.log(e)}).catch(e=>{console.log(e)}),e.target[0].value=""})(e,t)}},n.a.createElement("input",{id:"icon_prefix2",class:"materialize-textarea",placeholder:"message here",style:{marginBottom:"0"}})))))),n.a.createElement(i.Collapsible,{accordion:!0,style:{width:"14rem",display:"inline-block"},id:"chats_section"},n.a.createElement(i.CollapsibleItem,{expanded:!0,header:"Chats",icon:n.a.createElement(i.Icon,null,"filter_drama"),node:"div",style:{position:"relative"}},r.map(e=>n.a.createElement("div",{class:"row",style:{margin:"0"}},n.a.createElement("div",{class:"col s12",style:{padding:"0"}},n.a.createElement("div",{class:"card-panel indigo",style:{margin:"0"},onClick:()=>{(e=>{fetch("/addchats",{method:"put",headers:{Authorization:"Bearer "+localStorage.getItem("jwt"),"Content-Type":"application/json"},body:JSON.stringify({chat_person:e._id,chat_person_name:e.name,messages:{sender:JSON.parse(localStorage.getItem("user"))._id,sender_name:JSON.parse(localStorage.getItem("user")).name,message:""}})}).then(e=>e.json()).then(e=>{console.log(e)}),r.length=0})(e)}},n.a.createElement("span",{class:"white-text"},e.name))))),n.a.createElement("div",{class:"input-field col s6",style:{position:"absolute",width:"100%",bottom:"0",marginTop:"0rem"}},n.a.createElement("input",{id:"icon_prefix2",class:"materialize-textarea",placeholder:"Search",onChange:e=>{(e=>{fetch("/search-user",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.target.value.toLowerCase()})}).then(e=>e.json()).then(e=>{console.log(e),s(e)})})(e)},style:{marginBottom:"0"}})),n.a.createElement("div",{style:{height:"12rem",overflow:"auto"}},e.map((e,t)=>n.a.createElement("div",{class:"row",style:{margin:"0"}},n.a.createElement("div",{class:"col s12",style:{padding:"0"}},n.a.createElement("div",{class:"card-panel teal",style:{margin:"0"},onClick:()=>{((e,t)=>{var l=!1;a.forEach(e=>{e.key_chat==t&&(l=!0)}),0==a.length&&(l=!1),l||(a.push({key_chat:t,item:e}),o(a))})(e,t)}},n.a.createElement("span",{class:"white-text"},e.chat_person_name)))))))))};const x=Object(l.createContext)(),k=()=>{const{state:e,dispatch:t}=Object(l.useContext)(x);return e?n.a.createElement(N,null):n.a.createElement(n.a.Fragment,null)},I=()=>{const{state:e,dispatch:t}=Object(l.useContext)(x),a=Object(s.f)();return Object(l.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user"));e?t({type:"USER",payload:e}):a.push("/signin")},[]),n.a.createElement(s.c,null,n.a.createElement(s.a,{exact:!0,path:"/"},n.a.createElement(f,null)),n.a.createElement(s.a,{path:"/signup"},n.a.createElement(_.a,{type:"cobweb",color:"#ffffff",bg:!0}),n.a.createElement(b,null)),n.a.createElement(s.a,{path:"/signin"},n.a.createElement(_.a,{type:"cobweb",color:"#ffffff",bg:!0}),n.a.createElement(v,null)),n.a.createElement(s.a,{exact:!0,path:"/profile"},n.a.createElement(y,null)),n.a.createElement(s.a,{exact:!0,path:"/create"},n.a.createElement(w,null)),n.a.createElement(s.a,{exact:!0,path:"/profile/:userid"},n.a.createElement(j,null)),n.a.createElement(s.a,{exact:!0,path:"/myfollowingspost"},n.a.createElement(C,null)),n.a.createElement(s.a,{path:"/forgot_password"},n.a.createElement(O,null),n.a.createElement(_.a,{type:"cobweb",color:"#ffffff",bg:!0})))};var A=function(){const[e,t]=Object(l.useReducer)(S,null);return n.a.createElement(x.Provider,{value:{state:e,dispatch:t}},n.a.createElement(c.a,null,n.a.createElement(m,null),n.a.createElement(I,null),n.a.createElement(k,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}},[[129,1,2]]]);
//# sourceMappingURL=main.1043708a.chunk.js.map